<!DOCTYPE html>
<html lang="pt-PT">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Livraria Alma Liter√°ria - Literatura Portuguesa e Mundial</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Crimson+Pro:wght@400;600;700&family=Cinzel:wght@400;700&family=Lora:wght@400;500&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
    <div class="container">
        <!-- Cabe√ßalho com Carrinho -->
        <header>
            <div class="logo">
                <i class="fas fa-book-open"></i>
                <h1>Livraria Alma Liter√°ria</h1>
                <p class="tagline">Literatura Portuguesa & Mundial</p>
            </div>
            <nav>
                <ul>
                    <li><a href="#home" class="active">In√≠cio</a></li>
                    <li><a href="#catalogo">Cat√°logo</a></li>
                    <li><a href="#autores">Autores</a></li>
                    <li><a href="#sobre">Sobre</a></li>
                    <li><a href="#contacto">Contacto</a></li>
                </ul>
            </nav>
            <div class="cart-icon">
                <i class="fas fa-shopping-cart"></i>
                <span class="cart-count">0</span>
                <div class="cart-dropdown">
                    <div class="cart-items">
                        <!-- Itens do carrinho ser√£o inseridos aqui via JavaScript -->
                    </div>
                    <div class="cart-total">
                        <span>Total: ‚Ç¨<span id="cart-total-amount">0.00</span></span>
                        <button id="checkout-btn">Finalizar Compra</button>
                    </div>
                </div>
            </div>
        </header>

        <!-- Carrossel de Destaques -->
        <section class="carousel-section">
            <div class="carousel-container">
                <div class="carousel">
                    <div class="carousel-slide active">
                        <img src="https://images.unsplash.com/photo-1544947950-fa07a98d237f?ixlib=rb-4.0.3&auto=format&fit=crop&w=1200&q=80" alt="Livros Cl√°ssicos">
                        <div class="carousel-caption">
                            <h3>Cl√°ssicos da Literatura Mundial</h3>
                            <p>Das obras portuguesas aos grandes romances internacionais</p>
                        </div>
                    </div>
                    <div class="carousel-slide">
                        <img src="https://images.unsplash.com/photo-1512820790803-83ca734da794?ixlib=rb-4.0.3&auto=format&fit=crop&w=1200&q=80" alt="Novos Lan√ßamentos">
                        <div class="carousel-caption">
                            <h3>Novos Lan√ßamentos</h3>
                            <p>As √∫ltimas edi√ß√µes dos autores contempor√¢neos</p>
                        </div>
                    </div>
                    <div class="carousel-slide">
                        <img src="https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?ixlib=rb-4.0.3&auto=format&fit=crop&w=1200&q=80" alt="Literatura Portuguesa">
                        <div class="carousel-caption">
                            <h3>Literatura Portuguesa</h3>
                            <p>Do s√©culo XIX aos autores contempor√¢neos</p>
                        </div>
                    </div>
                </div>
                <button class="carousel-btn prev-btn"><i class="fas fa-chevron-left"></i></button>
                <button class="carousel-btn next-btn"><i class="fas fa-chevron-right"></i></button>
                <div class="carousel-indicators">
                    <span class="indicator active"></span>
                    <span class="indicator"></span>
                    <span class="indicator"></span>
                </div>
            </div>
        </section>

        <!-- Cat√°logo de Livros -->
        <section class="catalog-section" id="catalogo">
            <h2>Cat√°logo de Livros</h2>
            <p class="section-subtitle">Descubra obras de autores portugueses e internacionais</p>
            
            <div class="filter-buttons">
                <button class="filter-btn active" data-filter="todos">Todos</button>
                <button class="filter-btn" data-filter="portugues">Autores Portugueses</button>
                <button class="filter-btn" data-filter="internacional">Autores Internacionais</button>
                <button class="filter-btn" data-filter="classico">Cl√°ssicos</button>
                <button class="filter-btn" data-filter="contemporaneo">Contempor√¢neos</button>
            </div>
            
            <div class="catalog-grid">
                <!-- Livros ser√£o inseridos aqui via JavaScript -->
            </div>
        </section>

        <!-- Modal de Detalhes do Livro -->
        <div class="modal" id="bookModal">
            <div class="modal-content">
                <span class="close-modal">&times;</span>
                <div class="book-modal-content">
                    <!-- Conte√∫do ser√° preenchido via JavaScript -->
                </div>
            </div>
        </div>

        <!-- Modal do Carrinho -->
        <div class="modal" id="cartModal">
            <div class="modal-content cart-modal">
                <span class="close-modal">&times;</span>
                <h2>Seu Carrinho</h2>
                <div class="cart-items-modal">
                    <!-- Itens do carrinho ser√£o inseridos aqui -->
                </div>
                <div class="cart-summary">
                    <div class="summary-row">
                        <span>Subtotal:</span>
                        <span>‚Ç¨<span id="subtotal">0.00</span></span>
                    </div>
                    <div class="summary-row">
                        <span>Portes:</span>
                        <span>‚Ç¨<span id="shipping">3.50</span></span>
                    </div>
                    <div class="summary-row total">
                        <span>Total:</span>
                        <span>‚Ç¨<span id="total">3.50</span></span>
                    </div>
                    <button id="proceed-checkout" class="checkout-btn">Prosseguir para Pagamento</button>
                </div>
            </div>
        </div>

        <!-- Modal de Checkout -->
        <div class="modal" id="checkoutModal">
            <div class="modal-content checkout-modal">
                <span class="close-modal">&times;</span>
                <h2>Finalizar Compra</h2>
                
                <div class="checkout-steps">
                    <div class="step active">1. Envio</div>
                    <div class="step">2. Pagamento</div>
                    <div class="step">3. Confirma√ß√£o</div>
                </div>
                
                <form id="checkoutForm" class="checkout-form">
                    <div class="form-step active" id="step1">
                        <h3>Informa√ß√µes de Envio</h3>
                        <div class="form-group">
                            <label for="name">Nome Completo *</label>
                            <input type="text" id="name" name="name" required>
                        </div>
                        <div class="form-group">
                            <label for="email">E-mail *</label>
                            <input type="email" id="email" name="email" required>
                        </div>
                        <div class="form-group">
                            <label for="address">Morada *</label>
                            <textarea id="address" name="address" rows="3" required></textarea>
                        </div>
                        <div class="form-row">
                            <div class="form-group">
                                <label for="city">Cidade *</label>
                                <input type="text" id="city" name="city" required>
                            </div>
                            <div class="form-group">
                                <label for="postal">C√≥digo Postal *</label>
                                <input type="text" id="postal" name="postal" required>
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="country">Pa√≠s *</label>
                            <select id="country" name="country" required>
                                <option value="portugal">Portugal</option>
                                <option value="espanha">Espanha</option>
                                <option value="franca">Fran√ßa</option>
                                <option value="outro">Outro</option>
                            </select>
                        </div>
                        <button type="button" class="btn-next">Continuar para Pagamento</button>
                    </div>
                    
                    <div class="form-step" id="step2">
                        <h3>M√©todo de Pagamento</h3>
                        <div class="payment-methods">
                            <div class="payment-method">
                                <input type="radio" id="credit-card" name="payment" value="cartao" checked>
                                <label for="credit-card">
                                    <i class="fas fa-credit-card"></i>
                                    <span>Cart√£o de Cr√©dito/D√©bito</span>
                                </label>
                            </div>
                            <div class="payment-method">
                                <input type="radio" id="mbway" name="payment" value="mbway">
                                <label for="mbway">
                                    <i class="fas fa-mobile-alt"></i>
                                    <span>MB Way</span>
                                </label>
                            </div>
                            <div class="payment-method">
                                <input type="radio" id="transferencia" name="payment" value="transferencia">
                                <label for="transferencia">
                                    <i class="fas fa-university"></i>
                                    <span>Transfer√™ncia Banc√°ria</span>
                                </label>
                            </div>
                        </div>
                        
                        <div class="payment-details" id="credit-card-details">
                            <div class="form-group">
                                <label for="card-number">N√∫mero do Cart√£o *</label>
                                <input type="text" id="card-number" placeholder="1234 5678 9012 3456">
                            </div>
                            <div class="form-row">
                                <div class="form-group">
                                    <label for="expiry">Validade *</label>
                                    <input type="text" id="expiry" placeholder="MM/AA">
                                </div>
                                <div class="form-group">
                                    <label for="cvv">CVV *</label>
                                    <input type="text" id="cvv" placeholder="123">
                                </div>
                            </div>
                        </div>
                        
                        <div class="form-navigation">
                            <button type="button" class="btn-prev">Voltar</button>
                            <button type="button" class="btn-next">Continuar para Confirma√ß√£o</button>
                        </div>
                    </div>
                    
                    <div class="form-step" id="step3">
                        <h3>Resumo da Encomenda</h3>
                        <div class="order-summary">
                            <!-- Resumo ser√° preenchido via JavaScript -->
                        </div>
                        
                        <div class="terms-agreement">
                            <input type="checkbox" id="terms" required>
                            <label for="terms">Aceito os Termos e Condi√ß√µes *</label>
                        </div>

                        <!-- Captcha de imagem antes de confirmar compra -->
                        <div class="form-group captcha-group">
                            <label for="checkout-captcha-input">Captcha: escreva os caracteres que v√™ na imagem</label>
                            <div class="d-flex align-items-center" style="gap:12px; margin-top:8px; margin-bottom:8px;">
                                <canvas id="checkout-captcha-canvas" width="200" height="60" style="border:1px solid #d4b896;border-radius:6px;background:#fff"></canvas>
                                <button type="button" id="refresh-checkout-captcha" class="btn-next" style="padding:8px 12px;height:40px;">Mudar imagem</button>
                            </div>
                            <input type="text" id="checkout-captcha-input" name="checkout-captcha" required placeholder="Escreva os caracteres" style="padding:10px; width:100%; box-sizing:border-box;">
                            <div id="checkout-captcha-error" style="color:#dc3545; font-size:0.9rem; margin-top:6px; display:none;"></div>
                        </div>
                        
                        <div class="form-navigation">
                            <button type="button" class="btn-prev">Voltar</button>
                            <button type="submit" class="btn-submit">Confirmar Compra</button>
                        </div>
                    </div>
                </form>
            </div>
        </div>

        <!-- Quiz Liter√°rio -->
        <section class="quiz-section">
            <h2>Quiz Liter√°rio</h2>
            <p class="section-subtitle">Teste os seus conhecimentos sobre literatura portuguesa e mundial</p>
            
            <div class="quiz-container">
                <div class="quiz-progress">
                    <div class="progress-bar" id="quizProgress"></div>
                    <div class="progress-text">Pergunta <span id="currentQuestion">1</span> de 5</div>
                </div>
                
                <div class="quiz-content" id="quizContent">
                    <!-- Conte√∫do do quiz ser√° preenchido via JavaScript -->
                </div>
                
                <div class="quiz-navigation">
                    <button id="prevQuestion" class="nav-btn" disabled>Anterior</button>
                    <button id="nextQuestion" class="nav-btn">Pr√≥xima</button>
                </div>
            </div>
        </section>
        <!-- Contacto -->
        <section id="contacto" class="contact-section" style="padding:60px 0;">
            <h2 style="text-align:center; font-family:'Cinzel', serif; color:#5d4037;">Contacto</h2>
            <p style="text-align:center; color:#6d5d4b; margin-bottom:24px;">Envie-nos uma mensagem ‚Äî responderemos o mais breve poss√≠vel.</p>
            <div style="max-width:900px; margin:0 auto;">
                <form id="site-contact-form" class="contact-card" style="padding:20px; display:grid; gap:12px;">
                    <div style="display:grid; grid-template-columns:1fr 1fr; gap:12px;">
                        <input id="contact-name" placeholder="Nome" required style="padding:10px; border:1px solid #d4b896; border-radius:6px;">
                        <input id="contact-email" type="email" placeholder="Email" required style="padding:10px; border:1px solid #d4b896; border-radius:6px;">
                    </div>
                    <textarea id="contact-message" rows="5" placeholder="Mensagem" required style="padding:10px; border:1px solid #d4b896; border-radius:6px;"></textarea>
                    <div style="display:flex; gap:12px; align-items:center; justify-content:flex-end;">
                        <button type="submit" class="btn-next" style="background:#8b4513; color:#fff; border:none; padding:10px 18px; border-radius:6px;">Enviar Mensagem</button>
                        <div id="contact-form-msg" style="color:#27ae60; font-weight:600; display:none;"></div>
                    </div>
                </form>
            </div>
        </section>

        <!-- Rodap√© -->
        <footer>
            <div class="footer-content">
                <div class="footer-section">
                    <h4>Livraria Alma Liter√°ria</h4>
                    <p>Especializada em literatura portuguesa e internacional desde 1995.</p>
                    <div class="social-icons">
                        <a href="#"><i class="fab fa-facebook"></i></a>
                        <a href="#"><i class="fab fa-instagram"></i></a>
                        <a href="#"><i class="fab fa-twitter"></i></a>
                    </div>
                </div>
                <div class="footer-section">
                    <h4>Hor√°rio</h4>
                    <p>Segunda a Sexta: 9h √†s 19h</p>
                    <p>S√°bado: 10h √†s 18h</p>
                    <p>Domingo: Encerrado</p>
                </div>
                <div class="footer-section">
                    <h4>Contacto</h4>
                    <p><i class="fas fa-map-marker-alt"></i> Rua das Letras, 123, Lisboa</p>
                    <p><i class="fas fa-phone"></i> +351 21 123 4567</p>
                    <p><i class="fas fa-envelope"></i> info@almaliteraria.pt</p>
                </div>
            </div>
            <div class="footer-bottom">
                <p>&copy; 2023 Livraria Alma Liter√°ria. Todos os direitos reservados.</p>
            </div>
        </footer>
    </div>

    <script>
        // Dados dos livros
        const books = [
            {
                id: 1,
                title: "Os Maias",
                author: "E√ßa de Queir√≥s",
                nationality: "portugues",
                category: "classico",
                price: 18.90,
                rating: 4.8,
                description: "Considerada a obra-prima de E√ßa de Queir√≥s, retrata a decad√™ncia da alta burguesia lisboeta do s√©culo XIX atrav√©s da hist√≥ria da fam√≠lia Maia.",
                details: {
                    year: 1888,
                    pages: 672,
                    language: "Portugu√™s",
                    publisher: "Livros do Brasil",
                    isbn: "978-972-38-1234-5"
                },
                image: "https://images.unsplash.com/photo-1544947950-fa07a98d237f?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&q=80"
            },
            {
                id: 2,
                title: "1984",
                author: "George Orwell",
                nationality: "internacional",
                category: "classico",
                price: 15.50,
                rating: 4.9,
                description: "Um dos romances mais influentes do s√©culo XX, que introduziu conceitos como o Grande Irm√£o e a Pol√≠cia do Pensamento.",
                details: {
                    year: 1949,
                    pages: 328,
                    language: "Portugu√™s",
                    publisher: "Ant√≠gona",
                    isbn: "978-972-608-123-4"
                },
                image: "https://images.unsplash.com/photo-1541963463532-d68292c34b19?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&q=80"
            },
            {
                id: 3,
                title: "Ensaio sobre a Cegueira",
                author: "Jos√© Saramago",
                nationality: "portugues",
                category: "contemporaneo",
                price: 22.00,
                rating: 4.7,
                description: "Romance dist√≥pico que narra uma epidemia de cegueira branca que se espalha por uma cidade n√£o identificada.",
                details: {
                    year: 1995,
                    pages: 310,
                    language: "Portugu√™s",
                    publisher: "Caminho",
                    isbn: "978-972-21-1234-6"
                },
                image: "https://images.unsplash.com/photo-1512820790803-83ca734da794?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&q=80"
            },
            {
                id: 4,
                title: "Orgulho e Preconceito",
                author: "Jane Austen",
                nationality: "internacional",
                category: "classico",
                price: 14.90,
                rating: 4.8,
                description: "Considerada a primeira com√©dia rom√¢ntica na literatura inglesa, acompanha a vida de Elizabeth Bennet e sua fam√≠lia.",
                details: {
                    year: 1813,
                    pages: 432,
                    language: "Portugu√™s",
                    publisher: "Rel√≥gio D'√Ågua",
                    isbn: "978-972-708-123-7"
                },
                image: "https://images.unsplash.com/photo-1543002588-bfa74002ed7e?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&q=80"
            },
            {
                id: 5,
                title: "O Ano da Morte de Ricardo Reis",
                author: "Jos√© Saramago",
                nationality: "portugues",
                category: "contemporaneo",
                price: 19.90,
                rating: 4.6,
                description: "Romance que acompanha o regresso a Lisboa de Ricardo Reis, um dos heter√≥nimos de Fernando Pessoa.",
                details: {
                    year: 1984,
                    pages: 416,
                    language: "Portugu√™s",
                    publisher: "Caminho",
                    isbn: "978-972-21-1235-7"
                },
                image: "https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&q=80"
            },
            {
                id: 6,
                title: "Crime e Castigo",
                author: "Fi√≥dor Dostoi√©vski",
                nationality: "internacional",
                category: "classico",
                price: 17.50,
                rating: 4.9,
                description: "Romance psicol√≥gico que explora a mente de um estudante que comete um assassinato e lida com a culpa subsequente.",
                details: {
                    year: 1866,
                    pages: 544,
                    language: "Portugu√™s",
                    publisher: "Editorial Presen√ßa",
                    isbn: "978-972-23-1234-8"
                },
                image: "https://images.unsplash.com/photo-1516979187457-637abb4f9353?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&q=80"
            },
            {
                id: 7,
                title: "Livro do Desassossego",
                author: "Fernando Pessoa (Bernardo Soares)",
                nationality: "portugues",
                category: "classico",
                price: 24.90,
                rating: 4.8,
                description: "Obra fragment√°ria considerada uma das maiores obras da literatura portuguesa do s√©culo XX.",
                details: {
                    year: 1982,
                    pages: 528,
                    language: "Portugu√™s",
                    publisher: "Ass√≠rio & Alvim",
                    isbn: "978-972-37-1234-9"
                },
                image: "https://images.unsplash.com/photo-1513475382585-d06e58bcb0e0?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&q=80"
            },
            {
                id: 8,
                title: "Cem Anos de Solid√£o",
                author: "Gabriel Garc√≠a M√°rquez",
                nationality: "internacional",
                category: "contemporaneo",
                price: 20.00,
                rating: 4.9,
                description: "Obra-prima do realismo m√°gico que narra a hist√≥ria da fam√≠lia Buend√≠a ao longo de sete gera√ß√µes.",
                details: {
                    year: 1967,
                    pages: 448,
                    language: "Portugu√™s",
                    publisher: "Dom Quixote",
                    isbn: "978-972-20-1234-0"
                },
                image: "https://images.unsplash.com/photo-1512820790803-83ca734da794?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&q=80"
            }
        ];

        // Perguntas do quiz sobre literatura portuguesa e mundial
        const quizQuestions = [
            {
                question: "Quem escreveu 'Os Lus√≠adas', o √©pico nacional portugu√™s?",
                options: [
                    { text: "Lu√≠s de Cam√µes", correct: true },
                    { text: "Fernando Pessoa", correct: false },
                    { text: "E√ßa de Queir√≥s", correct: false },
                    { text: "Almeida Garrett", correct: false }
                ]
            },
            {
                question: "Qual destas obras foi escrita por Virginia Woolf?",
                options: [
                    { text: "Mrs. Dalloway", correct: true },
                    { text: "O Velho e o Mar", correct: false },
                    { text: "A Metamorfose", correct: false },
                    { text: "Os Miser√°veis", correct: false }
                ]
            },
            {
                question: "Qual destes √© um heter√≥nimo de Fernando Pessoa?",
                options: [
                    { text: "√Ålvaro de Campos", correct: true },
                    { text: "Miguel Torga", correct: false },
                    { text: "Jos√© Saramago", correct: false },
                    { text: "Sophia de Mello Breyner", correct: false }
                ]
            },
            {
                question: "Quem escreveu 'Dom Quixote', considerado o primeiro romance moderno?",
                options: [
                    { text: "Miguel de Cervantes", correct: true },
                    { text: "William Shakespeare", correct: false },
                    { text: "Victor Hugo", correct: false },
                    { text: "Fi√≥dor Dostoi√©vski", correct: false }
                ]
            },
            {
                question: "Qual destas obras pertence √† literatura portuguesa do s√©culo XIX?",
                options: [
                    { text: "Amor de Perdi√ß√£o", correct: true },
                    { text: "Ensaio sobre a Cegueira", correct: false },
                    { text: "Memorial do Convento", correct: false },
                    { text: "Os Maias", correct: true }
                ]
            }
        ];
    </script>
    <script>
        // Small script: nav toggle for mobile and contact form handler
        document.addEventListener('DOMContentLoaded', function() {
            // Nav toggle
            const nav = document.querySelector('header nav');
            if (nav) {
                const toggle = document.createElement('button');
                toggle.id = 'nav-toggle';
                toggle.innerHTML = '&#9776;';
                toggle.style.cssText = 'display:none;padding:8px 10px;font-size:20px;background:transparent;border:none;color:#5d4037;cursor:pointer;';
                const header = document.querySelector('header .logo');
                if (header && header.parentNode) header.parentNode.insertBefore(toggle, header.nextSibling);

                toggle.addEventListener('click', () => {
                    nav.classList.toggle('nav-open');
                });

                // show toggle on small screens via CSS
                const mql = window.matchMedia('(max-width: 768px)');
                function check() {
                    if (mql.matches) toggle.style.display = 'inline-block';
                    else { toggle.style.display = 'none'; nav.classList.remove('nav-open'); }
                }
                check();
                mql.addEventListener('change', check);
            }

            // Contact form submission (client-only)
            const contactForm = document.getElementById('site-contact-form');
            if (contactForm) {
                contactForm.addEventListener('submit', function(e) {
                    e.preventDefault();
                    const name = document.getElementById('contact-name').value.trim();
                    const email = document.getElementById('contact-email').value.trim();
                    const message = document.getElementById('contact-message').value.trim();
                    const msgEl = document.getElementById('contact-form-msg');
                    if (!name || !email || !message) {
                        showNotification('Preencha todos os campos do formul√°rio de contacto.', 'error');
                        return;
                    }
                    // Simulate send
                    if (msgEl) { msgEl.textContent = 'Mensagem enviada. Obrigado!'; msgEl.style.display = 'block'; }
                    showNotification('Mensagem enviada. Entraremos em contacto em breve.', 'success');
                    contactForm.reset();
                    setTimeout(() => { if (msgEl) msgEl.style.display = 'none'; }, 4000);
                });
            }
        });
    </script>
    <script>
        // Carrinho de compras
        let cart = JSON.parse(localStorage.getItem('cart')) || [];
        let currentQuestion = 0;
        let quizScore = 0;
        let userAnswers = [];
        // Captcha para checkout
        let checkoutCaptchaAnswer = null;

        // Inicializa√ß√£o quando o DOM estiver carregado
        document.addEventListener('DOMContentLoaded', function() {
            initCarousel();
            renderBooks();
            initFilters();
            initCart();
            initQuiz();
            initModal();
            initCheckout();
        });

        // Carrossel
        function initCarousel() {
            const carousel = document.querySelector('.carousel');
            const slides = document.querySelectorAll('.carousel-slide');
            const prevBtn = document.querySelector('.prev-btn');
            const nextBtn = document.querySelector('.next-btn');
            const indicators = document.querySelectorAll('.indicator');
            let currentSlide = 0;

            function updateCarousel() {
                carousel.style.transform = `translateX(-${currentSlide * 100}%)`;
                indicators.forEach((indicator, index) => {
                    indicator.classList.toggle('active', index === currentSlide);
                });
            }

            prevBtn.addEventListener('click', () => {
                currentSlide = (currentSlide - 1 + slides.length) % slides.length;
                updateCarousel();
            });

            nextBtn.addEventListener('click', () => {
                currentSlide = (currentSlide + 1) % slides.length;
                updateCarousel();
            });

            indicators.forEach((indicator, index) => {
                indicator.addEventListener('click', () => {
                    currentSlide = index;
                    updateCarousel();
                });
            });

            // Auto avan√ßo
            setInterval(() => {
                currentSlide = (currentSlide + 1) % slides.length;
                updateCarousel();
            }, 5000);
        }

        // Renderizar livros
        function renderBooks(filter = 'todos') {
            const catalogGrid = document.querySelector('.catalog-grid');
            catalogGrid.innerHTML = '';

            const filteredBooks = filter === 'todos' 
                ? books 
                : books.filter(book => book.nationality === filter || book.category === filter);

            filteredBooks.forEach(book => {
                const bookCard = document.createElement('div');
                bookCard.className = 'book-card';
                bookCard.dataset.id = book.id;
                bookCard.dataset.nationality = book.nationality;
                bookCard.dataset.category = book.category;

                bookCard.innerHTML = `
                    <div class="book-image">
                        <img src="${book.image}" alt="${book.title}">
                        ${book.nationality === 'portugues' ? '<span class="flag-tag">üáµüáπ Portugu√™s</span>' : '<span class="flag-tag">üåç Internacional</span>'}
                    </div>
                    <div class="book-info">
                        <h3 class="book-title">${book.title}</h3>
                        <p class="book-author">${book.author}</p>
                        <div class="book-rating">
                            ${generateStars(book.rating)}
                            <span class="rating-value">${book.rating}</span>
                        </div>
                        <p class="book-description">${book.description.substring(0, 100)}...</p>
                        <div class="book-footer">
                            <span class="book-price">‚Ç¨${book.price.toFixed(2)}</span>
                            <button class="btn-add-to-cart" data-id="${book.id}">
                                <i class="fas fa-cart-plus"></i> Adicionar
                            </button>
                        </div>
                    </div>
                `;

                catalogGrid.appendChild(bookCard);
            });

            // Adicionar eventos aos bot√µes
            document.querySelectorAll('.btn-add-to-cart').forEach(button => {
                button.addEventListener('click', function(e) {
                    e.stopPropagation();
                    const bookId = parseInt(this.dataset.id);
                    addToCart(bookId);
                });
            });

            // Adicionar evento para abrir modal ao clicar no card
            document.querySelectorAll('.book-card').forEach(card => {
                card.addEventListener('click', function() {
                    const bookId = parseInt(this.dataset.id);
                    openBookModal(bookId);
                });
            });
        }

        function generateStars(rating) {
            let stars = '';
            const fullStars = Math.floor(rating);
            const hasHalfStar = rating % 1 >= 0.5;

            for (let i = 0; i < 5; i++) {
                if (i < fullStars) {
                    stars += '<i class="fas fa-star"></i>';
                } else if (i === fullStars && hasHalfStar) {
                    stars += '<i class="fas fa-star-half-alt"></i>';
                } else {
                    stars += '<i class="far fa-star"></i>';
                }
            }
            return stars;
        }

        // Filtros
        function initFilters() {
            document.querySelectorAll('.filter-btn').forEach(button => {
                button.addEventListener('click', function() {
                    document.querySelectorAll('.filter-btn').forEach(btn => btn.classList.remove('active'));
                    this.classList.add('active');
                    const filter = this.dataset.filter;
                    renderBooks(filter);
                });
            });
        }

        // Carrinho
        function initCart() {
            updateCartCount();
            document.querySelector('.cart-icon').addEventListener('click', toggleCartDropdown);
            document.getElementById('checkout-btn').addEventListener('click', openCartModal);
        }

        function addToCart(bookId) {
            const book = books.find(b => b.id === bookId);
            const existingItem = cart.find(item => item.id === bookId);

            if (existingItem) {
                existingItem.quantity++;
            } else {
                cart.push({
                    id: book.id,
                    title: book.title,
                    author: book.author,
                    price: book.price,
                    image: book.image,
                    quantity: 1
                });
            }

            updateCartCount();
            saveCart();
            showNotification(`${book.title} adicionado ao carrinho!`);
        }

        function updateCartCount() {
            const totalItems = cart.reduce((sum, item) => sum + item.quantity, 0);
            document.querySelector('.cart-count').textContent = totalItems;
            
            // Atualizar dropdown
            updateCartDropdown();
        }

        function updateCartDropdown() {
            const cartItems = document.querySelector('.cart-items');
            const totalAmount = cart.reduce((sum, item) => sum + (item.price * item.quantity), 0);
            
            document.getElementById('cart-total-amount').textContent = totalAmount.toFixed(2);
            
            cartItems.innerHTML = '';
            if (cart.length === 0) {
                cartItems.innerHTML = '<p class="empty-cart">O carrinho est√° vazio</p>';
                return;
            }

            cart.forEach(item => {
                const cartItem = document.createElement('div');
                cartItem.className = 'cart-item';
                cartItem.innerHTML = `
                    <img src="${item.image}" alt="${item.title}">
                    <div class="cart-item-info">
                        <h4>${item.title}</h4>
                        <p>${item.author}</p>
                        <div class="cart-item-controls">
                            <button class="qty-btn" data-id="${item.id}" data-action="decrease">-</button>
                            <span class="qty">${item.quantity}</span>
                            <button class="qty-btn" data-id="${item.id}" data-action="increase">+</button>
                            <span class="cart-item-price">‚Ç¨${(item.price * item.quantity).toFixed(2)}</span>
                        </div>
                    </div>
                `;
                cartItems.appendChild(cartItem);
            });

            // Adicionar eventos aos bot√µes de quantidade
            document.querySelectorAll('.qty-btn').forEach(button => {
                button.addEventListener('click', function(e) {
                    e.stopPropagation();
                    const bookId = parseInt(this.dataset.id);
                    const action = this.dataset.action;
                    
                    if (action === 'increase') {
                        addToCart(bookId);
                    } else {
                        removeFromCart(bookId);
                    }
                });
            });
        }

        function removeFromCart(bookId) {
            const itemIndex = cart.findIndex(item => item.id === bookId);
            
            if (itemIndex !== -1) {
                if (cart[itemIndex].quantity > 1) {
                    cart[itemIndex].quantity--;
                } else {
                    cart.splice(itemIndex, 1);
                }
                
                updateCartCount();
                saveCart();
            }
        }

        function toggleCartDropdown(e) {
            e.stopPropagation();
            const dropdown = document.querySelector('.cart-dropdown');
            dropdown.classList.toggle('show');
        }

        function saveCart() {
            localStorage.setItem('cart', JSON.stringify(cart));
        }

        // Modal do livro
        function initModal() {
            const modal = document.getElementById('bookModal');
            const closeBtn = modal.querySelector('.close-modal');

            closeBtn.addEventListener('click', () => {
                modal.classList.remove('show');
            });

            window.addEventListener('click', (e) => {
                if (e.target === modal) {
                    modal.classList.remove('show');
                }
            });
        }

        function openBookModal(bookId) {
            const book = books.find(b => b.id === bookId);
            const modal = document.getElementById('bookModal');
            const modalContent = modal.querySelector('.book-modal-content');

            modalContent.innerHTML = `
                <div class="book-modal-image">
                    <img src="${book.image}" alt="${book.title}">
                </div>
                <div class="book-modal-info">
                    <h2>${book.title}</h2>
                    <p class="book-modal-author">${book.author}</p>
                    <div class="book-modal-rating">
                        ${generateStars(book.rating)}
                        <span class="rating-value">${book.rating}</span>
                        <span class="review-count">(248 avalia√ß√µes)</span>
                    </div>
                    <p class="book-modal-description">${book.description}</p>
                    
                    <div class="book-details">
                        <h4>Detalhes do Livro</h4>
                        <div class="detail-grid">
                            <div class="detail-item">
                                <span class="detail-label">Ano:</span>
                                <span class="detail-value">${book.details.year}</span>
                            </div>
                            <div class="detail-item">
                                <span class="detail-label">P√°ginas:</span>
                                <span class="detail-value">${book.details.pages}</span>
                            </div>
                            <div class="detail-item">
                                <span class="detail-label">Idioma:</span>
                                <span class="detail-value">${book.details.language}</span>
                            </div>
                            <div class="detail-item">
                                <span class="detail-label">Editora:</span>
                                <span class="detail-value">${book.details.publisher}</span>
                            </div>
                            <div class="detail-item">
                                <span class="detail-label">ISBN:</span>
                                <span class="detail-value">${book.details.isbn}</span>
                            </div>
                        </div>
                    </div>
                    
                    <div class="book-modal-actions">
                        <div class="price-container">
                            <span class="book-modal-price">‚Ç¨${book.price.toFixed(2)}</span>
                            <span class="stock-status">Em stock</span>
                        </div>
                        <button class="btn-add-to-cart-modal" data-id="${book.id}">
                            <i class="fas fa-cart-plus"></i> Adicionar ao Carrinho
                        </button>
                    </div>
                </div>
            `;

            // Adicionar evento ao bot√£o no modal
            modal.querySelector('.btn-add-to-cart-modal').addEventListener('click', function(e) {
                e.stopPropagation();
                addToCart(book.id);
                modal.classList.remove('show');
            });

            modal.classList.add('show');
        }

        // Modal do carrinho
        function openCartModal() {
            const modal = document.getElementById('cartModal');
            const cartItemsModal = modal.querySelector('.cart-items-modal');
            
            document.querySelector('.cart-dropdown').classList.remove('show');
            
            cartItemsModal.innerHTML = '';
            
            if (cart.length === 0) {
                cartItemsModal.innerHTML = '<p class="empty-cart-message">O seu carrinho est√° vazio</p>';
            } else {
                cart.forEach(item => {
                    const cartItem = document.createElement('div');
                    cartItem.className = 'cart-item-modal';
                    cartItem.innerHTML = `
                        <img src="${item.image}" alt="${item.title}">
                        <div class="cart-item-modal-info">
                            <h4>${item.title}</h4>
                            <p>${item.author}</p>
                            <div class="cart-item-modal-controls">
                                <button class="qty-btn-modal" data-id="${item.id}" data-action="decrease">-</button>
                                <span class="qty-modal">${item.quantity}</span>
                                <button class="qty-btn-modal" data-id="${item.id}" data-action="increase">+</button>
                                <button class="remove-btn" data-id="${item.id}">Remover</button>
                            </div>
                        </div>
                        <div class="cart-item-modal-price">
                            ‚Ç¨${(item.price * item.quantity).toFixed(2)}
                        </div>
                    `;
                    cartItemsModal.appendChild(cartItem);
                });

                // Adicionar eventos
                document.querySelectorAll('.qty-btn-modal').forEach(button => {
                    button.addEventListener('click', function() {
                        const bookId = parseInt(this.dataset.id);
                        const action = this.dataset.action;
                        
                        if (action === 'increase') {
                            addToCart(bookId);
                        } else {
                            removeFromCart(bookId);
                        }
                        openCartModal(); // Recarregar modal
                    });
                });

                document.querySelectorAll('.remove-btn').forEach(button => {
                    button.addEventListener('click', function() {
                        const bookId = parseInt(this.dataset.id);
                        removeItemFromCart(bookId);
                        openCartModal();
                    });
                });
            }

            // Atualizar total
            const subtotal = cart.reduce((sum, item) => sum + (item.price * item.quantity), 0);
            const shipping = 3.50;
            const total = subtotal + shipping;

            document.getElementById('subtotal').textContent = subtotal.toFixed(2);
            document.getElementById('total').textContent = total.toFixed(2);

            modal.classList.add('show');

            // Adicionar evento ao bot√£o de checkout
            document.getElementById('proceed-checkout').addEventListener('click', function() {
                modal.classList.remove('show');
                openCheckoutModal();
            });

            // Fechar modal
            modal.querySelector('.close-modal').addEventListener('click', () => {
                modal.classList.remove('show');
            });
        }

        function removeItemFromCart(bookId) {
            cart = cart.filter(item => item.id !== bookId);
            updateCartCount();
            saveCart();
        }

        // Checkout
        function initCheckout() {
            const checkoutModal = document.getElementById('checkoutModal');
            const closeBtn = checkoutModal.querySelector('.close-modal');
            
            closeBtn.addEventListener('click', () => {
                checkoutModal.classList.remove('show');
            });

            // Navega√ß√£o entre passos
            document.querySelectorAll('.btn-next').forEach(button => {
                button.addEventListener('click', function() {
                    const currentStep = this.closest('.form-step');
                    const nextStepId = currentStep.id === 'step1' ? 'step2' : 
                                     currentStep.id === 'step2' ? 'step3' : null;
                    
                    if (nextStepId) {
                        currentStep.classList.remove('active');
                        document.getElementById(nextStepId).classList.add('active');
                        updateSteps(nextStepId);
                        
                        if (nextStepId === 'step3') {
                            updateOrderSummary();
                        }
                    }
                });
            });

            document.querySelectorAll('.btn-prev').forEach(button => {
                button.addEventListener('click', function() {
                    const currentStep = this.closest('.form-step');
                    const prevStepId = currentStep.id === 'step3' ? 'step2' : 
                                     currentStep.id === 'step2' ? 'step1' : null;
                    
                    if (prevStepId) {
                        currentStep.classList.remove('active');
                        document.getElementById(prevStepId).classList.add('active');
                        updateSteps(prevStepId);
                    }
                });
            });

            // Refresh captcha button (imagem)
            const refreshBtn = document.getElementById('refresh-checkout-captcha');
            if (refreshBtn) {
                refreshBtn.addEventListener('click', function() {
                    checkoutCaptchaAnswer = generateCheckoutCaptcha();
                    const input = document.getElementById('checkout-captcha-input');
                    const errEl = document.getElementById('checkout-captcha-error');
                    if (input) input.value = '';
                    if (errEl) { errEl.style.display = 'none'; }
                });
            }

            // M√©todos de pagamento
            document.querySelectorAll('input[name="payment"]').forEach(radio => {
                radio.addEventListener('change', function() {
                    document.querySelectorAll('.payment-details').forEach(details => {
                        details.style.display = 'none';
                    });
                    
                    if (this.value === 'cartao') {
                        document.getElementById('credit-card-details').style.display = 'block';
                    }
                });
            });

            // Submiss√£o do formul√°rio (valida√ß√£o de captcha antes de processar)
            document.getElementById('checkoutForm').addEventListener('submit', function(e) {
                e.preventDefault();
                const input = document.getElementById('checkout-captcha-input');
                const errEl = document.getElementById('checkout-captcha-error');
                if (!input) {
                    processOrder();
                    return;
                }
                const val = input.value.trim();
                if (!val || val.toLowerCase() !== String(checkoutCaptchaAnswer).toLowerCase()) {
                    // mostrar erro inline e notifica√ß√£o
                    if (errEl) { errEl.textContent = 'Captcha incorreto. Tente novamente.'; errEl.style.display = 'block'; }
                    showNotification('Captcha incorreto. Tente novamente.', 'error');
                    // gerar novo captcha
                    checkoutCaptchaAnswer = generateCheckoutCaptcha();
                    input.value = '';
                    return;
                }

                // tudo bem ‚Äî processar encomenda
                if (errEl) { errEl.style.display = 'none'; }
                processOrder();
            });
        }

        function openCheckoutModal() {
            if (cart.length === 0) {
                showNotification('Adicione produtos ao carrinho primeiro!', 'error');
                return;
            }

            const modal = document.getElementById('checkoutModal');
            modal.classList.add('show');
            // gerar captcha para este checkout
            if (typeof generateCheckoutCaptcha === 'function') {
                checkoutCaptchaAnswer = generateCheckoutCaptcha();
                const input = document.getElementById('checkout-captcha-input');
                if (input) input.value = '';
            }
            
            // Resetar para o primeiro passo
            document.querySelectorAll('.form-step').forEach(step => {
                step.classList.remove('active');
            });
            document.getElementById('step1').classList.add('active');
            updateSteps('step1');
        }

        // Gera um captcha de imagem para o checkout e desenha no canvas
        function generateCheckoutCaptcha() {
            const chars = 'ABCDEFGHJKLMNPQRSTUVWXYZ23456789';
            const length = 5;
            let text = '';
            for (let i = 0; i < length; i++) {
                text += chars.charAt(Math.floor(Math.random() * chars.length));
            }

            const canvas = document.getElementById('checkout-captcha-canvas');
            if (!canvas) return text;
            const ctx = canvas.getContext('2d');
            // Clear
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            // Background
            ctx.fillStyle = '#f7f3ee';
            ctx.fillRect(0, 0, canvas.width, canvas.height);

            // Add noise lines
            for (let i = 0; i < 6; i++) {
                ctx.strokeStyle = `rgba(0,0,0,${Math.random() * 0.15})`;
                ctx.lineWidth = 1 + Math.random() * 1.5;
                ctx.beginPath();
                ctx.moveTo(Math.random() * canvas.width, Math.random() * canvas.height);
                ctx.lineTo(Math.random() * canvas.width, Math.random() * canvas.height);
                ctx.stroke();
            }

            // Draw text with per-letter rotation
            const baseX = 18;
            const baseY = canvas.height / 2 + 10;
            for (let i = 0; i < text.length; i++) {
                const ch = text.charAt(i);
                const fontSize = 28 + Math.floor(Math.random() * 6);
                ctx.font = `${fontSize}px serif`;
                ctx.fillStyle = `rgba(${30 + Math.floor(Math.random()*80)}, ${20 + Math.floor(Math.random()*80)}, ${20 + Math.floor(Math.random()*80)}, 1)`;
                const x = baseX + i * 34 + (Math.random() * 6 - 3);
                const angle = (Math.random() * 20 - 10) * Math.PI / 180;
                ctx.save();
                ctx.translate(x, baseY);
                ctx.rotate(angle);
                ctx.fillText(ch, 0, 0);
                ctx.restore();
            }

            // Add dots
            for (let i = 0; i < 30; i++) {
                ctx.fillStyle = `rgba(0,0,0,${Math.random() * 0.12})`;
                ctx.beginPath();
                ctx.arc(Math.random() * canvas.width, Math.random() * canvas.height, Math.random() * 1.8, 0, Math.PI * 2);
                ctx.fill();
            }

            return text;
        }

        function updateSteps(currentStep) {
            document.querySelectorAll('.step').forEach((step, index) => {
                step.classList.remove('active', 'completed');
                
                if (currentStep === 'step1' && index === 0) {
                    step.classList.add('active');
                } else if (currentStep === 'step2') {
                    if (index < 1) step.classList.add('completed');
                    if (index === 1) step.classList.add('active');
                } else if (currentStep === 'step3') {
                    if (index < 2) step.classList.add('completed');
                    if (index === 2) step.classList.add('active');
                }
            });
        }

        function updateOrderSummary() {
            const summary = document.querySelector('.order-summary');
            let html = '<div class="order-items">';
            
            cart.forEach(item => {
                html += `
                    <div class="order-item">
                        <div class="order-item-info">
                            <h5>${item.title}</h5>
                            <p>${item.author}</p>
                            <span>Qtd: ${item.quantity}</span>
                        </div>
                        <div class="order-item-price">
                            ‚Ç¨${(item.price * item.quantity).toFixed(2)}
                        </div>
                    </div>
                `;
            });
            
            const subtotal = cart.reduce((sum, item) => sum + (item.price * item.quantity), 0);
            const shipping = 3.50;
            const total = subtotal + shipping;
            
            html += '</div>';
            html += `
                <div class="order-totals">
                    <div class="order-total-row">
                        <span>Subtotal:</span>
                        <span>‚Ç¨${subtotal.toFixed(2)}</span>
                    </div>
                    <div class="order-total-row">
                        <span>Portes:</span>
                        <span>‚Ç¨${shipping.toFixed(2)}</span>
                    </div>
                    <div class="order-total-row total">
                        <span>Total:</span>
                        <span>‚Ç¨${total.toFixed(2)}</span>
                    </div>
                </div>
            `;
            
            summary.innerHTML = html;
        }

        function processOrder() {
            // Simular processamento
            showNotification('Processando o seu pedido...', 'info');
            
            setTimeout(() => {
                document.getElementById('checkoutModal').classList.remove('show');
                
                // Limpar carrinho
                cart = [];
                updateCartCount();
                saveCart();
                
                // Mostrar confirma√ß√£o
                showNotification('Pedido realizado com sucesso! Obrigado pela sua compra.', 'success');
            }, 2000);
        }

        // Quiz
        function initQuiz() {
            renderQuizQuestion();
            
            document.getElementById('nextQuestion').addEventListener('click', nextQuestion);
            document.getElementById('prevQuestion').addEventListener('click', prevQuestion);
        }

        function renderQuizQuestion() {
            const quizContent = document.getElementById('quizContent');
            const question = quizQuestions[currentQuestion];
            
            let optionsHtml = '';
            question.options.forEach((option, index) => {
                const isSelected = userAnswers[currentQuestion] === option.text;
                optionsHtml += `
                    <div class="quiz-option ${isSelected ? 'selected' : ''}" data-index="${index}">
                        <div class="option-circle">${String.fromCharCode(65 + index)}</div>
                        <div class="option-text">${option.text}</div>
                    </div>
                `;
            });
            
            quizContent.innerHTML = `
                <h3 class="quiz-question">${question.question}</h3>
                <div class="quiz-options">${optionsHtml}</div>
            `;
            
            // Adicionar eventos √†s op√ß√µes
            document.querySelectorAll('.quiz-option').forEach(option => {
                option.addEventListener('click', function() {
                    const optionIndex = parseInt(this.dataset.index);
                    selectQuizOption(optionIndex);
                });
            });
            
            // Atualizar progresso
            document.getElementById('quizProgress').style.width = `${((currentQuestion + 1) / quizQuestions.length) * 100}%`;
            document.getElementById('currentQuestion').textContent = currentQuestion + 1;
            
            // Atualizar bot√µes
            document.getElementById('prevQuestion').disabled = currentQuestion === 0;
            document.getElementById('nextQuestion').textContent = currentQuestion === quizQuestions.length - 1 ? 'Ver Resultado' : 'Pr√≥xima';
        }

        function selectQuizOption(optionIndex) {
            const question = quizQuestions[currentQuestion];
            userAnswers[currentQuestion] = question.options[optionIndex].text;
            
            // Atualizar interface
            document.querySelectorAll('.quiz-option').forEach(option => {
                option.classList.remove('selected');
            });
            document.querySelector(`.quiz-option[data-index="${optionIndex}"]`).classList.add('selected');
        }

        function nextQuestion() {
            if (currentQuestion < quizQuestions.length - 1) {
                if (!userAnswers[currentQuestion]) {
                    showNotification('Por favor, selecione uma resposta!', 'error');
                    return;
                }
                currentQuestion++;
                renderQuizQuestion();
            } else {
                if (!userAnswers[currentQuestion]) {
                    showNotification('Por favor, selecione uma resposta!', 'error');
                    return;
                }
                showQuizResult();
            }
        }

        function prevQuestion() {
            if (currentQuestion > 0) {
                currentQuestion--;
                renderQuizQuestion();
            }
        }

        function showQuizResult() {
            // Calcular pontua√ß√£o
            quizScore = 0;
            quizQuestions.forEach((question, index) => {
                const userAnswer = userAnswers[index];
                const correctOption = question.options.find(opt => opt.correct);
                if (userAnswer === correctOption.text) {
                    quizScore++;
                }
            });
            
            const quizContent = document.getElementById('quizContent');
            const discount = quizScore >= 4 ? 15 : quizScore >= 3 ? 10 : quizScore >= 2 ? 5 : 0;
            
            quizContent.innerHTML = `
                <div class="quiz-result">
                    <h3>Quiz Conclu√≠do!</h3>
                    <div class="result-score">
                        <div class="score-circle">${quizScore}/5</div>
                        <p>Acertou ${quizScore} de ${quizQuestions.length} perguntas</p>
                    </div>
                    ${discount > 0 ? `
                        <div class="discount-badge">
                            <i class="fas fa-tag"></i>
                            <span>${discount}% de desconto!</span>
                        </div>
                        <p class="discount-code">Use o c√≥digo: <strong>LITERATURA${quizScore}</strong></p>
                        <p class="discount-info">Este c√≥digo √© v√°lido por 30 dias na sua pr√≥xima compra</p>
                    ` : `
                        <p class="no-discount">Continue a explorar a literatura para ganhar descontos!</p>
                    `}
                    <button class="restart-quiz-btn" onclick="restartQuiz()">Refazer Quiz</button>
                </div>
            `;
            
            document.querySelector('.quiz-navigation').style.display = 'none';
        }

        function restartQuiz() {
            currentQuestion = 0;
            quizScore = 0;
            userAnswers = [];
            document.querySelector('.quiz-navigation').style.display = 'flex';
            renderQuizQuestion();
        }

        // Utilit√°rios
        function showNotification(message, type = 'success') {
            const notification = document.createElement('div');
            notification.className = `notification ${type}`;
            notification.innerHTML = `
                <i class="fas fa-${type === 'success' ? 'check-circle' : type === 'error' ? 'exclamation-circle' : 'info-circle'}"></i>
                <span>${message}</span>
            `;
            
            document.body.appendChild(notification);
            
            // Anima√ß√£o de entrada
            setTimeout(() => notification.classList.add('show'), 10);
            
            // Remover ap√≥s 3 segundos
            setTimeout(() => {
                notification.classList.remove('show');
                setTimeout(() => notification.remove(), 300);
            }, 3000);
        }

        // Fechar dropdown do carrinho ao clicar fora
        document.addEventListener('click', function(e) {
            if (!e.target.closest('.cart-icon')) {
                document.querySelector('.cart-dropdown').classList.remove('show');
            }
        });
    </script>
    <style>
        /* Reset e Estilos Gerais */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Crimson Pro', serif;
            background-color: #f8f5ef;
            color: #3c2f2f;
            line-height: 1.6;
            background-image: url('https://www.transparenttextures.com/patterns/paper.png');
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 0 20px;
        }

        /* Cabe√ßalho */
        header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 25px 0;
            border-bottom: 2px solid #d4b896;
            margin-bottom: 40px;
            position: relative;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .logo i {
            font-size: 2.8rem;
            color: #8b4513;
        }

        .logo h1 {
            font-family: 'Cinzel', serif;
            font-size: 2.2rem;
            color: #3c2f2f;
            font-weight: 700;
        }

        .tagline {
            font-size: 0.9rem;
            color: #6d5d4b;
            margin-top: 5px;
        }

        nav ul {
            display: flex;
            list-style: none;
            gap: 30px;
        }

        nav a {
            text-decoration: none;
            color: #5d4037;
            font-weight: 600;
            font-size: 1.1rem;
            padding: 8px 12px;
            border-radius: 4px;
            transition: all 0.3s ease;
        }

        nav a:hover, nav a.active {
            background-color: #d4b896;
            color: #3c2f2f;
        }

        /* √çcone do Carrinho */
        .cart-icon {
            position: relative;
            cursor: pointer;
            font-size: 1.5rem;
            color: #5d4037;
            padding: 10px;
        }

        .cart-count {
            position: absolute;
            top: -5px;
            right: -5px;
            background-color: #8b4513;
            color: white;
            border-radius: 50%;
            width: 22px;
            height: 22px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.8rem;
            font-weight: bold;
        }

        .cart-dropdown {
            position: absolute;
            top: 100%;
            right: 0;
            background: white;
            border: 1px solid #d4b896;
            border-radius: 8px;
            padding: 20px;
            min-width: 350px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            display: none;
            z-index: 100;
        }

        .cart-dropdown.show {
            display: block;
        }

        .cart-items {
            max-height: 300px;
            overflow-y: auto;
            margin-bottom: 20px;
        }

        .cart-item {
            display: flex;
            gap: 15px;
            padding: 10px 0;
            border-bottom: 1px solid #eee;
        }

        .cart-item img {
            width: 60px;
            height: 80px;
            object-fit: cover;
            border-radius: 4px;
        }

        .cart-item-info h4 {
            font-size: 0.9rem;
            margin-bottom: 5px;
        }

        .cart-item-info p {
            font-size: 0.8rem;
            color: #666;
            margin-bottom: 10px;
        }

        .cart-item-controls {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .qty-btn {
            width: 25px;
            height: 25px;
            border: 1px solid #d4b896;
            background: white;
            border-radius: 4px;
            cursor: pointer;
        }

        .qty {
            font-weight: bold;
            min-width: 20px;
            text-align: center;
        }

        .cart-item-price {
            font-weight: bold;
            color: #8b4513;
            margin-left: auto;
        }

        .cart-total {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding-top: 20px;
            border-top: 2px solid #d4b896;
        }

        #checkout-btn {
            background-color: #8b4513;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 4px;
            cursor: pointer;
            font-family: 'Cinzel', serif;
        }

        /* Carrossel */
        .carousel-section {
            margin-bottom: 60px;
        }

        .carousel-container {
            position: relative;
            overflow: hidden;
            border-radius: 12px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.15);
            height: 500px;
        }

        .carousel {
            display: flex;
            transition: transform 0.5s ease-in-out;
            height: 100%;
        }

        .carousel-slide {
            min-width: 100%;
            height: 100%;
            position: relative;
        }

        .carousel-slide img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .carousel-caption {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            background: rgba(60, 47, 47, 0.85);
            color: #f8f5ef;
            padding: 25px;
            border-top: 3px solid #d4b896;
        }

        .carousel-caption h3 {
            font-family: 'Cinzel', serif;
            font-size: 1.8rem;
            margin-bottom: 8px;
        }

        .carousel-caption p {
            font-size: 1.1rem;
            opacity: 0.9;
        }

        .carousel-btn {
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            background: rgba(139, 69, 19, 0.8);
            color: white;
            border: none;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            font-size: 1.3rem;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .carousel-btn:hover {
            background: rgba(139, 69, 19, 1);
        }

        .prev-btn {
            left: 20px;
        }

        .next-btn {
            right: 20px;
        }

        .carousel-indicators {
            position: absolute;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            display: flex;
            gap: 12px;
        }

        .indicator {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background-color: rgba(255, 255, 255, 0.5);
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .indicator.active {
            background-color: #d4b896;
            transform: scale(1.2);
        }

        /* Cat√°logo */
        .catalog-section {
            padding: 60px 0;
        }

        h2 {
            font-family: 'Cinzel', serif;
            font-size: 2.5rem;
            text-align: center;
            color: #5d4037;
            margin-bottom: 10px;
        }

        .section-subtitle {
            text-align: center;
            color: #6d5d4b;
            margin-bottom: 40px;
            font-size: 1.1rem;
        }

        .filter-buttons {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-bottom: 40px;
            flex-wrap: wrap;
        }

        .filter-btn {
            padding: 10px 25px;
            border: 2px solid #d4b896;
            background: white;
            color: #5d4037;
            border-radius: 25px;
            cursor: pointer;
            font-family: 'Crimson Pro', serif;
            font-weight: 600;
            transition: all 0.3s ease;
        }

        .filter-btn:hover, .filter-btn.active {
            background-color: #8b4513;
            color: white;
            border-color: #8b4513;
        }

        .catalog-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 30px;
            margin-top: 40px;
        }

        .book-card {
            background: white;
            border-radius: 12px;
            overflow: hidden;
            box-shadow: 0 5px 20px rgba(0,0,0,0.1);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            cursor: pointer;
        }

        .book-card:hover {
            transform: translateY(-10px);
            box-shadow: 0 15px 30px rgba(0,0,0,0.15);
        }

        .book-image {
            position: relative;
            height: 250px;
            overflow: hidden;
        }

        .book-image img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: transform 0.5s ease;
        }

        .book-card:hover .book-image img {
            transform: scale(1.05);
        }

        .flag-tag {
            position: absolute;
            top: 15px;
            right: 15px;
            background: rgba(0,0,0,0.7);
            color: white;
            padding: 5px 10px;
            border-radius: 4px;
            font-size: 0.8rem;
        }

        .book-info {
            padding: 20px;
        }

        .book-title {
            font-family: 'Cinzel', serif;
            font-size: 1.4rem;
            color: #3c2f2f;
            margin-bottom: 8px;
        }

        .book-author {
            color: #8b4513;
            font-style: italic;
            margin-bottom: 15px;
        }

        .book-rating {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 15px;
        }

        .book-rating i {
            color: #ffc107;
        }

        .rating-value {
            font-weight: bold;
            color: #5d4037;
        }

        .book-description {
            color: #666;
            font-size: 0.9rem;
            line-height: 1.5;
            margin-bottom: 20px;
        }

        .book-footer {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .book-price {
            font-family: 'Cinzel', serif;
            font-size: 1.5rem;
            color: #8b4513;
            font-weight: bold;
        }

        .btn-add-to-cart {
            background-color: #8b4513;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 4px;
            cursor: pointer;
            font-family: 'Crimson Pro', serif;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 8px;
            transition: background-color 0.3s ease;
        }

        .btn-add-to-cart:hover {
            background-color: #6b3410;
        }

        /* Modal do Livro */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.8);
            z-index: 1000;
            overflow-y: auto;
            padding: 20px;
        }

        .modal.show {
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .modal-content {
            background: white;
            border-radius: 12px;
            width: 90%;
            max-width: 1000px;
            max-height: 90vh;
            overflow-y: auto;
            position: relative;
            animation: modalFadeIn 0.3s ease;
            padding: 24px; /* add internal spacing so content doesn't touch edges */
            box-sizing: border-box;
        }

        @keyframes modalFadeIn {
            from { opacity: 0; transform: translateY(-20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .close-modal {
            position: absolute;
            top: 20px;
            right: 20px;
            font-size: 2rem;
            color: #8b4513;
            cursor: pointer;
            z-index: 10;
        }

        .book-modal-content {
            display: grid;
            grid-template-columns: 1fr 2fr;
            gap: 40px;
            padding: 40px;
        }

        .book-modal-image {
            position: sticky;
            top: 20px;
        }

        .book-modal-image img {
            width: 100%;
            height: auto;
            border-radius: 8px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
        }

        .book-modal-info h2 {
            text-align: left;
            font-size: 2.2rem;
            margin-bottom: 10px;
        }

        .book-modal-author {
            font-size: 1.2rem;
            color: #8b4513;
            margin-bottom: 20px;
        }

        .book-modal-rating {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 30px;
        }

        .review-count {
            color: #666;
            font-size: 0.9rem;
        }

        .book-modal-description {
            font-size: 1.1rem;
            line-height: 1.8;
            margin-bottom: 40px;
            color: #444;
        }

        .book-details {
            background: #f9f5f0;
            padding: 25px;
            border-radius: 8px;
            margin-bottom: 30px;
        }

        .book-details h4 {
            font-family: 'Cinzel', serif;
            margin-bottom: 20px;
            color: #5d4037;
        }

        .detail-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 15px;
        }

        .detail-item {
            display: flex;
            justify-content: space-between;
            padding-bottom: 10px;
            border-bottom: 1px solid #e0d6c8;
        }

        .detail-label {
            font-weight: 600;
            color: #5d4037;
        }

        .book-modal-actions {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding-top: 30px;
            border-top: 2px solid #d4b896;
        }

        .price-container {
            display: flex;
            flex-direction: column;
            gap: 5px;
        }

        .book-modal-price {
            font-family: 'Cinzel', serif;
            font-size: 2.5rem;
            color: #8b4513;
            font-weight: bold;
        }

        .stock-status {
            color: #28a745;
            font-weight: 600;
        }

        .btn-add-to-cart-modal {
            background-color: #8b4513;
            color: white;
            border: none;
            padding: 15px 40px;
            border-radius: 8px;
            cursor: pointer;
            font-family: 'Cinzel', serif;
            font-size: 1.1rem;
            display: flex;
            align-items: center;
            gap: 10px;
            transition: all 0.3s ease;
        }

        .btn-add-to-cart-modal:hover {
            background-color: #6b3410;
            transform: translateY(-3px);
        }

        /* Modal do Carrinho */
        .cart-modal {
            max-width: 800px;
        }

        .cart-items-modal {
            max-height: 400px;
            overflow-y: auto;
            margin: 20px 0;
        }

        .cart-item-modal {
            display: flex;
            align-items: center;
            gap: 20px;
            padding: 20px;
            border-bottom: 1px solid #eee;
        }

        .cart-item-modal img {
            width: 80px;
            height: 100px;
            object-fit: cover;
            border-radius: 4px;
        }

        .cart-item-modal-info {
            flex: 1;
        }

        .cart-item-modal-info h4 {
            margin-bottom: 5px;
        }

        .cart-item-modal-controls {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-top: 10px;
        }

        .qty-btn-modal {
            width: 30px;
            height: 30px;
            border: 1px solid #d4b896;
            background: white;
            border-radius: 4px;
            cursor: pointer;
        }

        .qty-modal {
            font-weight: bold;
            min-width: 30px;
            text-align: center;
        }

        .remove-btn {
            background: #dc3545;
            color: white;
            border: none;
            padding: 5px 10px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 0.8rem;
        }

        .cart-item-modal-price {
            font-family: 'Cinzel', serif;
            font-size: 1.2rem;
            font-weight: bold;
            color: #8b4513;
        }

        .cart-summary {
            background: #f9f5f0;
            padding: 30px;
            border-radius: 8px;
        }

        .summary-row {
            display: flex;
            justify-content: space-between;
            margin-bottom: 15px;
            font-size: 1.1rem;
        }

        .summary-row.total {
            font-size: 1.5rem;
            font-weight: bold;
            color: #8b4513;
            border-top: 2px solid #d4b896;
            padding-top: 15px;
            margin-top: 15px;
        }

        .checkout-btn {
            width: 100%;
            background-color: #8b4513;
            color: white;
            border: none;
            padding: 15px;
            border-radius: 8px;
            cursor: pointer;
            font-family: 'Cinzel', serif;
            font-size: 1.1rem;
            margin-top: 20px;
            transition: background-color 0.3s ease;
        }

        .checkout-btn:hover {
            background-color: #6b3410;
        }

        /* Modal de Checkout */
        .checkout-modal {
            max-width: 900px;
        }

        .checkout-steps {
            display: flex;
            justify-content: space-between;
            margin: 30px 0;
            position: relative;
        }

        .checkout-steps:before {
            content: '';
            position: absolute;
            top: 15px;
            left: 0;
            right: 0;
            height: 2px;
            background: #d4b896;
            z-index: 1;
        }

        .step {
            position: relative;
            z-index: 2;
            background: white;
            padding: 10px 20px;
            border: 2px solid #d4b896;
            border-radius: 25px;
            color: #6d5d4b;
        }

        .step.active {
            background: #8b4513;
            color: white;
            border-color: #8b4513;
        }

        .step.completed {
            background: #28a745;
            color: white;
            border-color: #28a745;
        }

        .checkout-form {
            padding: 20px 0;
        }

        .form-step {
            display: none;
        }

        .form-step.active {
            display: block;
            padding: 18px 20px; /* keep content away from borders */
            background: #fff;
            border-radius: 8px;
            box-shadow: 0 6px 18px rgba(0,0,0,0.06);
        }

        .form-group {
            margin-bottom: 25px;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #5d4037;
        }

        .form-group input,
        .form-group select,
        .form-group textarea {
            width: 100%;
            padding: 12px;
            border: 1px solid #d4b896;
            border-radius: 6px;
            font-family: 'Crimson Pro', serif;
            font-size: 1rem;
            background-color: #fdfcf9;
        }

        /* Extra spacing for checkout inputs */
        #checkoutForm .form-group { margin-bottom: 18px; }
        #checkoutForm .form-row { gap: 18px; }
        #checkoutForm .btn-next, #checkoutForm .btn-prev, #checkoutForm .btn-submit { padding: 12px 24px; }

        .form-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
        }

        .payment-methods {
            display: flex;
            flex-direction: column;
            gap: 15px;
            margin: 30px 0;
        }

        .payment-method {
            display: flex;
            align-items: center;
            gap: 15px;
            padding: 15px;
            border: 2px solid #d4b896;
            border-radius: 8px;
            cursor: pointer;
        }

        .payment-method input[type="radio"] {
            width: auto;
        }

        .payment-method label {
            display: flex;
            align-items: center;
            gap: 10px;
            cursor: pointer;
            margin: 0;
            flex: 1;
        }

        .payment-details {
            background: #f9f5f0;
            padding: 20px;
            border-radius: 8px;
            margin: 20px 0;
        }

        .form-navigation {
            display: flex;
            justify-content: space-between;
            margin-top: 40px;
        }

        .btn-prev, .btn-next, .btn-submit {
            padding: 12px 30px;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-family: 'Cinzel', serif;
            font-size: 1rem;
        }

        .btn-prev {
            background: #6d5d4b;
            color: white;
        }

        .btn-next, .btn-submit {
            background: #8b4513;
            color: white;
        }

        .order-summary {
            background: #f9f5f0;
            padding: 25px;
            border-radius: 8px;
            margin: 20px 0;
        }

        .order-item {
            display: flex;
            justify-content: space-between;
            padding: 15px 0;
            border-bottom: 1px solid #e0d6c8;
        }

        .order-totals {
            margin-top: 20px;
            padding-top: 20px;
            border-top: 2px solid #d4b896;
        }

        .order-total-row {
            display: flex;
            justify-content: space-between;
            margin-bottom: 10px;
        }

        .order-total-row.total {
            font-size: 1.2rem;
            font-weight: bold;
            color: #8b4513;
        }

        .terms-agreement {
            display: flex;
            align-items: center;
            gap: 10px;
            margin: 30px 0;
        }

        /* Quiz */
        .quiz-section {
            background: white;
            padding: 60px;
            border-radius: 12px;
            margin: 60px 0;
            box-shadow: 0 5px 20px rgba(0,0,0,0.08);
        }

        .quiz-container {
            max-width: 800px;
            margin: 0 auto;
        }

        .quiz-progress {
            margin-bottom: 40px;
        }

        .progress-bar {
            height: 8px;
            background: #d4b896;
            border-radius: 4px;
            margin-bottom: 10px;
            width: 20%;
            transition: width 0.3s ease;
        }

        .progress-text {
            text-align: right;
            color: #8b4513;
            font-style: italic;
        }

        .quiz-question {
            font-family: 'Cinzel', serif;
            font-size: 1.8rem;
            color: #5d4037;
            margin-bottom: 40px;
            text-align: center;
        }

        .quiz-options {
            display: flex;
            flex-direction: column;
            gap: 15px;
            margin-bottom: 40px;
        }

        .quiz-option {
            display: flex;
            align-items: center;
            gap: 20px;
            padding: 20px;
            border: 2px solid #d4b896;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .quiz-option:hover {
            background: #f9f5f0;
        }

        .quiz-option.selected {
            background: #8b4513;
            color: white;
            border-color: #8b4513;
        }

        .option-circle {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: rgba(0,0,0,0.1);
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
        }

        .quiz-option.selected .option-circle {
            background: white;
            color: #8b4513;
        }

        .option-text {
            flex: 1;
            font-size: 1.1rem;
        }

        .quiz-navigation {
            display: flex;
            justify-content: space-between;
        }

        .nav-btn {
            padding: 12px 30px;
            background: #8b4513;
            color: white;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-family: 'Cinzel', serif;
            font-size: 1rem;
        }

        .nav-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .quiz-result {
            text-align: center;
            padding: 40px 0;
        }

        .result-score {
            margin: 40px 0;
        }

        .score-circle {
            width: 120px;
            height: 120px;
            border-radius: 50%;
            background: #8b4513;
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2.5rem;
            font-weight: bold;
            margin: 0 auto 20px;
        }

        .discount-badge {
            background: #ffc107;
            color: #856404;
            padding: 15px 30px;
            border-radius: 25px;
            display: inline-flex;
            align-items: center;
            gap: 10px;
            font-size: 1.2rem;
            font-weight: bold;
            margin: 20px 0;
        }

        .discount-code {
            font-size: 1.3rem;
            margin: 20px 0;
        }

        .discount-info {
            color: #666;
            margin-bottom: 30px;
        }

        .restart-quiz-btn {
            background: #5d4037;
            color: white;
            border: none;
            padding: 15px 40px;
            border-radius: 8px;
            cursor: pointer;
            font-family: 'Cinzel', serif;
            font-size: 1.1rem;
        }

        /* Rodap√© */
        footer {
            background: #3c2f2f;
            color: #f8f5ef;
            padding: 60px 0 20px;
            margin-top: 60px;
        }

        .footer-content {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 40px;
            margin-bottom: 40px;
        }

        .footer-section h4 {
            font-family: 'Cinzel', serif;
            font-size: 1.4rem;
            color: #d4b896;
            margin-bottom: 20px;
        }

        .footer-section p {
            margin-bottom: 10px;
            line-height: 1.8;
        }

        .social-icons {
            display: flex;
            gap: 15px;
            margin-top: 20px;
        }

        .social-icons a {
            color: #f8f5ef;
            font-size: 1.2rem;
            transition: color 0.3s ease;
        }

        .social-icons a:hover {
            color: #d4b896;
        }

        .footer-bottom {
            text-align: center;
            padding-top: 20px;
            border-top: 1px solid #5d4037;
            color: #b8a9a9;
            font-size: 0.9rem;
        }

        /* Notifica√ß√µes */
        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            background: white;
            padding: 15px 25px;
            border-radius: 8px;
            box-shadow: 0 5px 20px rgba(0,0,0,0.2);
            display: flex;
            align-items: center;
            gap: 15px;
            z-index: 2000;
            transform: translateX(100%);
            opacity: 0;
            transition: all 0.3s ease;
        }

        .notification.show {
            transform: translateX(0);
            opacity: 1;
        }

        .notification.success {
            border-left: 4px solid #28a745;
        }

        .notification.error {
            border-left: 4px solid #dc3545;
        }

        .notification.info {
            border-left: 4px solid #17a2b8;
        }

        .notification i {
            font-size: 1.2rem;
        }

        .notification.success i {
            color: #28a745;
        }

        .notification.error i {
            color: #dc3545;
        }

        .notification.info i {
            color: #17a2b8;
        }

        /* Responsividade */
        @media (max-width: 1024px) {
            .book-modal-content {
                grid-template-columns: 1fr;
            }
            
            .book-modal-image {
                position: static;
                max-width: 400px;
                margin: 0 auto;
            }
        }

        @media (max-width: 768px) {
            header {
                flex-direction: column;
                gap: 20px;
                text-align: center;
            }
            
            nav ul {
                flex-wrap: wrap;
                justify-content: center;
            }
            
            .carousel-container {
                height: 300px;
            }
            
            .carousel-caption h3 {
                font-size: 1.3rem;
            }
            
            .carousel-caption p {
                font-size: 0.9rem;
            }
            
            .cart-dropdown {
                position: fixed;
                top: auto;
                bottom: 0;
                left: 0;
                right: 0;
                border-radius: 12px 12px 0 0;
                min-width: auto;
            }
            
            .form-row {
                grid-template-columns: 1fr;
            }
            
            .quiz-question {
                font-size: 1.4rem;
            }
        }

        /* Mobile nav behavior */
        header nav { transition: max-height 0.25s ease; }
        header nav.nav-open { display: block; }
        @media (max-width:768px) {
            header nav { display: none; width:100%; }
            header nav ul { flex-direction: column; gap:8px; }
            header nav.nav-open { display: block; }
        }

        @media (max-width: 480px) {
            .filter-buttons {
                flex-direction: column;
                align-items: center;
            }
            
            .book-modal-content {
                padding: 20px;
            }
            
            .book-modal-actions {
                flex-direction: column;
                gap: 20px;
                text-align: center;
            }
            
            .checkout-steps {
                flex-direction: column;
                gap: 15px;
            }
            
            .checkout-steps:before {
                display: none;
            }
            
            .step {
                width: 100%;
                text-align: center;
            }
        }
    </style>
</body>
</html>